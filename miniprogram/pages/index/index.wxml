<!--index.wxml-->
<view class="topTab flexWrp flexTab" >
  <view class="top-Tab flexItem {{currentNavtab==idx ? 'active' : ''}}" wx:for="{{navTab}}" wx:for-index="idx" wx:for-item="tabName" data-idx="{{idx}}" bindtap="switchTopTab">
    {{tabName}}
  </view>
</view>

<import src="../../app.wxml"/>

<scroll-view scroll-y="true" style='margin-top: 80rpx; margin-bottom: 130rpx' class="container withtab" bindscrolltoupper="upper" bindscrolltolower="lower"  scroll-into-view="{{toView}}" scroll-top="{{scrollTop}}">
  
  <view class="container" hidden="{{currentNavtab==0 ? '' : true}}">

    <template is="postPreview" data="{{userInfo}}"/>
    <template is="postPreview" data="{{userInfo}}"/>

    <!-- 用户 openid -->
    <view class="userinfo">
      <button 
        open-type="getUserInfo" 
        bindgetuserinfo="onGetUserInfo"
        class="userinfo-avatar"
        style="background-image: url({{avatarUrl}})"
      ></button>
      <text class="userinfo-nickname" style="color:grey">{{userInfo.nickName}}</text>
      <view>
        <button class="userinfo-nickname" bindtap="onGetOpenid">点击获取 openid</button>
      </view>
    </view>


    <!-- 上传图片 -->
    <view class="uploader">
      <view class="uploader-text" bindtap="doUpload">
        <text>上传图片</text>
      </view>
      <view class="uploader-container" wx:if="{{imgUrl}}">
        <image class="uploader-image" src="{{imgUrl}}" mode="aspectFit" bindtap="previewImg"></image>
      </view>
    </view>


    <!-- 操作数据库 -->
    <view class="uploader">
      <navigator url="../databaseGuide/databaseGuide" open-type="navigate" class="uploader-text">
        <text>前端操作数据库</text>
      </navigator>
    </view>

    <!-- 新建云函数 -->
    <view class="uploader">
      <navigator url="../addFunction/addFunction" open-type="navigate" class="uploader-text">
        <text>快速新建云函数</text>
      </navigator>
    </view>

    <view>
      <navigator url='../submitForm/submitForm' class="uploader-text">
        <text>提交表单</text>
      </navigator>
    </view>

  </view>
  <view class="container" hidden="{{currentNavtab==1 ? '' : true}}">

    <template is="postPreview" data="{{userInfo}}"/>
    <template is="postPreview" data="{{userInfo}}"/>

  </view>
</scroll-view>

<tabbar tabbar="{{tabbar}}"></tabbar>